# Application Configuration
NODE_ENV=development

# JIRA Configuration (Input - for fetching data)
JIRA_URL=https://your-jira-instance.atlassian.net
JIRA_EMAIL=your-email@example.com
JIRA_API_TOKEN=your-jira-api-token
JIRA_PROJECT_KEY=YOUR_PROJECT_KEY
JIRA_FETCH_FIELDS=summary,description,customfield_10000
JIRA_MAX_RESULT=100
JIRA_TICKET_ID=

# Confluence Configuration (for fetching data)
CONFLUENCE_URL=https://your-jira-instance.atlassian.net
CONFLUENCE_EMAIL=your-email@example.com
CONFLUENCE_API_TOKEN=your-confluence-api-token
CONFLUENCE_SPACE_KEY=MySpace
CONFLUENCE_MAX_PAGES=
CONFLUENCE_PAGE_LIMIT=50
# Suppress logging during page downloads (true/false, default: false)
CONFLUENCE_SILENT_MODE=false

# Claude Runner Configuration
# Enable verbose mode for claude-runner.ts (true/false, default: false)
CLAUDE_VERBOSE_MODE=false

# Confluence Upload Configuration (optional - for uploading to different account)
# If not provided, will use the same account as above
CONFLUENCE_UPLOAD_URL=
CONFLUENCE_UPLOAD_EMAIL=
CONFLUENCE_UPLOAD_API_TOKEN=
CONFLUENCE_UPLOAD_SPACE_KEY=

# Presidio Configuration (PII Detection)
PRESIDIO_ANALYZE_URL=http://localhost:5002/analyze
PRESIDIO_ANONYMIZE_URL=http://localhost:5001/anonymize

# Data Sanitization Configuration
# Enable/disable PII detection and redaction for PostgreSQL data (true/false, default: true)
SANITIZE_PG_DATA=true

# Analysis Path Configuration
# Current analysis folder path (format: YYYY-MM-DD-HH-MM-SS-Via-AI)
# This is used to construct the full analysis path: {SPACE_KEY}-Quality-Check-Via-AI/{TICKET_ID}-Via-AI/{CURRENT_ANALYSIS_PATH}
CURRENT_ANALYSIS_PATH=

SAVE_TO_FILE=true

# File Names Configuration (can be overridden)
JIRA_FILE_NAME=Jira.md
CONFLUENCE_FILE_NAME=Confluence.md
CONFLUENCE_RAG_FILE_NAME=Confluence-Rag.md
REQUIREMENTS_FILE_NAME=Requirements.md
ANALYSIS_REPORT_FILE_NAME=AnalysisReport.md

# Folder Naming Configuration
# Base folder suffix (default: Quality-Check-Via-AI)
BASE_FOLDER_SUFFIX=Quality-Check-Via-AI
# Ticket folder suffix (default: Via-AI)
TICKET_FOLDER_SUFFIX=Via-AI
# Timestamp folder suffix (default: Via-AI)
TIMESTAMP_FOLDER_SUFFIX=Via-AI

# Confluence Page Names Configuration
CONFLUENCE_ROOT_PAGE_SUFFIX=Quality-Check-Via-AI
CONFLUENCE_TICKET_PAGE_SUFFIX=Via-AI

# Note: Confluence page hierarchy structure:
# 1. Root: {SPACE_KEY}-Quality-Check-Via-AI (container for all reports)
# 2. Ticket: {TICKET_ID}-Via-AI (container for specific ticket reports)
# 3. Analysis: {CURRENT_ANALYSIS_PATH} (e.g., "2025-01-30-Via-AI" - the actual report page with content)
#
# Pages matching the above patterns or timestamp format will be automatically excluded
# when downloading Confluence content to prevent AI-generated reports from being
# re-analyzed in subsequent runs (prevents feedback loops)

# ===================================================================
# RAG SYSTEM CONFIGURATION (PostgreSQL + pgvector)
# ===================================================================

# Enable PostgreSQL Vector DB for storing Confluence documents
# Set to true to save Confluence pages to PostgreSQL with embeddings during fetch
# Set to false to only save to local files (default behavior)
USE_POSTGRES_VECTOR_DB=false

# PostgreSQL Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=
DATABASE_NAME=
DATABASE_USER=
DATABASE_PASSWORD=

# OpenAI Embeddings Configuration
EMBEDDING_PROVIDER=openai
OPENAI_API_KEY=

# Performance Configuration (Optional)
# Increase embedding concurrency for faster vector DB indexing (default: 10)
EMBEDDING_CONCURRENCY=50
# Increase batch size for processing pages (default: 10)
INDEXER_BATCH_SIZE=50
# Text chunking configuration (default: 1000/200)
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
