{
  "secrets": {
    "description": "Sensitive data that must be encrypted. Set these in: Repository Settings → Secrets and variables → Actions → Secrets",
    "required": [
      {
        "name": "JIRA_URL",
        "env_var": "JIRA_URL",
        "description": "JIRA instance URL (e.g., https://yourcompany.atlassian.net)",
        "example": "https://yourcompany.atlassian.net",
        "sensitive": true,
        "reason": "May contain company-specific domain information"
      },
      {
        "name": "JIRA_EMAIL",
        "env_var": "JIRA_EMAIL",
        "description": "JIRA user email for authentication",
        "example": "jira-bot@yourcompany.com",
        "sensitive": true,
        "reason": "Contains user credentials"
      },
      {
        "name": "JIRA_API_TOKEN",
        "env_var": "JIRA_API_TOKEN",
        "description": "JIRA API token for authentication",
        "example": "ATBBxxxxxxxxxxxxxxxxxxxxxx",
        "sensitive": true,
        "reason": "API token with full access to JIRA"
      },
      {
        "name": "CONFLUENCE_URL",
        "env_var": "CONFLUENCE_URL",
        "description": "Confluence instance URL",
        "example": "https://yourcompany.atlassian.net/wiki",
        "sensitive": true,
        "reason": "May contain company-specific domain information"
      },
      {
        "name": "CONFLUENCE_EMAIL",
        "env_var": "CONFLUENCE_EMAIL",
        "description": "Confluence user email for authentication",
        "example": "confluence-bot@yourcompany.com",
        "sensitive": true,
        "reason": "Contains user credentials"
      },
      {
        "name": "CONFLUENCE_API_TOKEN",
        "env_var": "CONFLUENCE_API_TOKEN",
        "description": "Confluence API token for authentication",
        "example": "ATBBxxxxxxxxxxxxxxxxxxxxxx",
        "sensitive": true,
        "reason": "API token with full access to Confluence"
      },
      {
        "name": "CONFLUENCE_UPLOAD_URL",
        "env_var": "CONFLUENCE_UPLOAD_URL",
        "description": "Confluence instance URL for uploading results (optional - if different from fetch URL)",
        "example": "https://targetcompany.atlassian.net/wiki",
        "sensitive": true,
        "reason": "May contain company-specific domain information"
      },
      {
        "name": "CONFLUENCE_UPLOAD_EMAIL",
        "env_var": "CONFLUENCE_UPLOAD_EMAIL",
        "description": "Confluence user email for uploading results (optional - if different from fetch email)",
        "example": "upload-bot@targetcompany.com",
        "sensitive": true,
        "reason": "Contains user credentials"
      },
      {
        "name": "CONFLUENCE_UPLOAD_API_TOKEN",
        "env_var": "CONFLUENCE_UPLOAD_API_TOKEN",
        "description": "Confluence API token for uploading results (optional - if different from fetch token)",
        "example": "ATBBxxxxxxxxxxxxxxxxxxxxxx",
        "sensitive": true,
        "reason": "API token with full access to Confluence"
      },
      {
        "name": "AWS_REGION_BEDROCK",
        "env_var": "AWS_REGION_BEDROCK",
        "description": "AWS region for Bedrock service",
        "example": "us-east-2",
        "sensitive": false,
        "reason": "AWS region configuration"
      },
      {
        "name": "AWS_ACCESS_KEY_BEDROCK",
        "env_var": "AWS_ACCESS_KEY_BEDROCK",
        "description": "AWS access key for Bedrock authentication",
        "example": "AKIAIOSFODNN7EXAMPLE",
        "sensitive": true,
        "reason": "AWS access credentials"
      },
      {
        "name": "AWS_SECRET_KEY_BEDROCK",
        "env_var": "AWS_SECRET_KEY_BEDROCK",
        "description": "AWS secret key for Bedrock authentication",
        "example": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
        "sensitive": true,
        "reason": "AWS secret credentials"
      },
      {
        "name": "AWS_BEDROCK_MODEL",
        "env_var": "AWS_BEDROCK_MODEL",
        "description": "AWS Bedrock model identifier",
        "example": "us.anthropic.claude-3-5-sonnet-20241022-v2:0",
        "sensitive": false,
        "reason": "Model configuration, not sensitive"
      },
      {
        "name": "ANTHROPIC_MODEL",
        "env_var": "ANTHROPIC_MODEL",
        "description": "Anthropic model name for Claude",
        "example": "sonnet[1m]",
        "sensitive": false,
        "reason": "Model configuration, not sensitive"
      },
      {
        "name": "DOCKER_USERNAME",
        "env_var": "DOCKER_USERNAME",
        "description": "Docker registry username for authentication",
        "example": "dockerhub-user",
        "sensitive": true,
        "reason": "Docker registry credentials"
      },
      {
        "name": "DOCKER_PASSWORD",
        "env_var": "DOCKER_PASSWORD",
        "description": "Docker registry password/token for authentication",
        "example": "dckr_pat_xxxxxxxxxxxxxxxxxxxx",
        "sensitive": true,
        "reason": "Docker registry authentication token"
      },
      {
        "name": "OPENAI_API_KEY",
        "env_var": "OPENAI_API_KEY",
        "description": "OpenAI API key for embeddings - used by both quality check and test generation workflows (optional - required only if USE_POSTGRES_VECTOR_DB is enabled)",
        "example": "sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "sensitive": true,
        "reason": "OpenAI API credentials for embeddings generation",
        "workflows": ["quality-check", "generate-tests"],
        "secret_names": {
          "quality_check": "UT_QUALITY_OPENAI_API_KEY",
          "generate_tests": "UT_GENERATE_OPENAI_API_KEY"
        }
      },
      {
        "name": "DATABASE_HOST",
        "env_var": "DATABASE_HOST",
        "description": "PostgreSQL database host (optional - required only if USE_POSTGRES_VECTOR_DB is enabled)",
        "example": "localhost",
        "sensitive": false,
        "reason": "Database connection configuration"
      },
      {
        "name": "DATABASE_PORT",
        "env_var": "DATABASE_PORT",
        "description": "PostgreSQL database port (optional - required only if USE_POSTGRES_VECTOR_DB is enabled)",
        "example": "5432",
        "sensitive": false,
        "reason": "Database connection configuration"
      },
      {
        "name": "DATABASE_NAME",
        "env_var": "DATABASE_NAME",
        "description": "PostgreSQL database name (optional - required only if USE_POSTGRES_VECTOR_DB is enabled)",
        "example": "postgres-pgvector",
        "sensitive": false,
        "reason": "Database name configuration"
      },
      {
        "name": "DATABASE_USER",
        "env_var": "DATABASE_USER",
        "description": "PostgreSQL database user (optional - required only if USE_POSTGRES_VECTOR_DB is enabled)",
        "example": "postgres",
        "sensitive": true,
        "reason": "Database authentication credentials"
      },
      {
        "name": "DATABASE_PASSWORD",
        "env_var": "DATABASE_PASSWORD",
        "description": "PostgreSQL database password (optional - required only if USE_POSTGRES_VECTOR_DB is enabled)",
        "example": "your-secure-password",
        "sensitive": true,
        "reason": "Database authentication credentials"
      }
    ]
  },
  "variables": {
    "description": "Non-sensitive configuration values. Set these in: Repository Settings → Secrets and variables → Actions → Variables",
    "optional": [
      {
        "name": "JIRA_PROJECT_KEY",
        "env_var": "JIRA_PROJECT_KEY",
        "description": "JIRA project key identifier",
        "example": "BB",
        "default": "BB",
        "sensitive": false,
        "reason": "Public project identifier, not sensitive"
      },
      {
        "name": "CONFLUENCE_SPACE_KEY",
        "env_var": "CONFLUENCE_SPACE_KEY",
        "description": "Confluence space key identifier",
        "example": "BB",
        "default": "BB",
        "sensitive": false,
        "reason": "Public space identifier, not sensitive"
      },
      {
        "name": "CONFLUENCE_UPLOAD_SPACE_KEY",
        "env_var": "CONFLUENCE_UPLOAD_SPACE_KEY",
        "description": "Confluence space key for uploading results (optional - if different from fetch space)",
        "example": "TARGET",
        "default": "",
        "sensitive": false,
        "reason": "Public space identifier, not sensitive"
      },
      {
        "name": "MINIMUM_SCORE",
        "env_var": "MINIMUM_SCORE",
        "description": "Minimum acceptable test quality score (0-10)",
        "example": "1.0",
        "default": "1.0",
        "sensitive": false,
        "reason": "Quality threshold configuration, not sensitive"
      },
      {
        "name": "UPLOAD_TO_CONFLUENCE",
        "env_var": "UPLOAD_TO_CONFLUENCE",
        "description": "Whether to upload results to Confluence (true/false)",
        "example": "true",
        "default": "true",
        "sensitive": false,
        "reason": "Feature flag, not sensitive"
      },
      {
        "name": "WORKFLOW_RETENTION_DAYS",
        "env_var": "WORKFLOW_RETENTION_DAYS",
        "description": "Number of days to retain workflow artifacts",
        "example": "2",
        "default": "2",
        "sensitive": false,
        "reason": "Retention policy, not sensitive"
      },
      {
        "name": "CLAUDE_CODE_USE_BEDROCK",
        "env_var": "CLAUDE_CODE_USE_BEDROCK",
        "description": "Enable AWS Bedrock for Claude (1=enabled, 0=disabled)",
        "example": "1",
        "default": "1",
        "sensitive": false,
        "reason": "Feature flag, not sensitive"
      },
      {
        "name": "USE_POSTGRES_VECTOR_DB",
        "env_var": "USE_POSTGRES_VECTOR_DB",
        "description": "Enable PostgreSQL Vector Database with pgvector for RAG-based Confluence fetching (true/false)",
        "example": "false",
        "default": "false",
        "sensitive": false,
        "reason": "Feature flag, not sensitive"
      }
    ]
  },
  "environment_specific": {
    "description": "Values that are automatically provided by GitHub Actions context",
    "builtin": [
      {
        "name": "github.server_url",
        "description": "GitHub server URL",
        "example": "https://github.com",
        "usage": "${{ github.server_url }}"
      },
      {
        "name": "github.repository",
        "description": "Repository owner/name",
        "example": "your-org/your-repo",
        "usage": "${{ github.repository }}"
      },
      {
        "name": "github.head_ref",
        "description": "Branch name for PR",
        "example": "feature/BB-15690-test",
        "usage": "${{ github.head_ref || github.ref_name }}"
      },
      {
        "name": "github.run_id",
        "description": "Workflow run ID",
        "example": "123456789",
        "usage": "${{ github.run_id }}"
      },
      {
        "name": "github.run_number",
        "description": "Workflow run number",
        "example": "42",
        "usage": "${{ github.run_number }}"
      }
    ]
  },
  "usage_in_workflow": {
    "note": "Two types of workflows use different secret prefixes: UT_QUALITY_* for quality check workflow, UT_GENERATE_* for test generation workflow",
    "secrets_example_quality_check": {
      "jira_url": "${{ secrets.UT_QUALITY_JIRA_URL }}",
      "jira_email": "${{ secrets.UT_QUALITY_JIRA_EMAIL }}",
      "jira_api_token": "${{ secrets.UT_QUALITY_JIRA_API_TOKEN }}",
      "confluence_url": "${{ secrets.UT_QUALITY_CONFLUENCE_URL }}",
      "confluence_email": "${{ secrets.UT_QUALITY_CONFLUENCE_EMAIL }}",
      "confluence_api_token": "${{ secrets.UT_QUALITY_CONFLUENCE_API_TOKEN }}",
      "confluence_upload_url": "${{ secrets.UT_QUALITY_CONFLUENCE_UPLOAD_URL }}",
      "confluence_upload_email": "${{ secrets.UT_QUALITY_CONFLUENCE_UPLOAD_EMAIL }}",
      "confluence_upload_api_token": "${{ secrets.UT_QUALITY_CONFLUENCE_UPLOAD_API_TOKEN }}",
      "aws_region_bedrock": "${{ secrets.UT_QUALITY_AWS_REGION_BEDROCK }}",
      "aws_access_key_bedrock": "${{ secrets.UT_QUALITY_AWS_ACCESS_KEY_BEDROCK }}",
      "aws_secret_key_bedrock": "${{ secrets.UT_QUALITY_AWS_SECRET_KEY_BEDROCK }}",
      "aws_bedrock_model": "${{ secrets.UT_QUALITY_AWS_BEDROCK_MODEL }}",
      "anthropic_model": "${{ secrets.UT_QUALITY_ANTHROPIC_MODEL }}",
      "docker_username": "${{ secrets.UT_QUALITY_DOCKER_USERNAME }}",
      "docker_password": "${{ secrets.UT_QUALITY_DOCKER_PASSWORD }}",
      "openai_api_key": "${{ secrets.UT_QUALITY_OPENAI_API_KEY }}",
      "database_host": "${{ secrets.UT_QUALITY_DATABASE_HOST }}",
      "database_port": "${{ secrets.UT_QUALITY_DATABASE_PORT }}",
      "database_name": "${{ secrets.UT_QUALITY_DATABASE_NAME }}",
      "database_user": "${{ secrets.UT_QUALITY_DATABASE_USER }}",
      "database_password": "${{ secrets.UT_QUALITY_DATABASE_PASSWORD }}"
    },
    "secrets_example_generate_tests": {
      "jira_url": "${{ secrets.UT_GENERATE_JIRA_URL }}",
      "jira_email": "${{ secrets.UT_GENERATE_JIRA_EMAIL }}",
      "jira_api_token": "${{ secrets.UT_GENERATE_JIRA_API_TOKEN }}",
      "confluence_url": "${{ secrets.UT_GENERATE_CONFLUENCE_URL }}",
      "confluence_email": "${{ secrets.UT_GENERATE_CONFLUENCE_EMAIL }}",
      "confluence_api_token": "${{ secrets.UT_GENERATE_CONFLUENCE_API_TOKEN }}",
      "aws_region_bedrock": "${{ secrets.UT_GENERATE_AWS_REGION_BEDROCK }}",
      "aws_access_key_bedrock": "${{ secrets.UT_GENERATE_AWS_ACCESS_KEY_BEDROCK }}",
      "aws_secret_key_bedrock": "${{ secrets.UT_GENERATE_AWS_SECRET_KEY_BEDROCK }}",
      "aws_bedrock_model": "${{ secrets.UT_GENERATE_AWS_BEDROCK_MODEL }}",
      "anthropic_model": "${{ secrets.UT_GENERATE_ANTHROPIC_MODEL }}",
      "openai_api_key": "${{ secrets.UT_GENERATE_OPENAI_API_KEY }}",
      "database_host": "${{ secrets.UT_GENERATE_DATABASE_HOST }}",
      "database_port": "${{ secrets.UT_GENERATE_DATABASE_PORT }}",
      "database_name": "${{ secrets.UT_GENERATE_DATABASE_NAME }}",
      "database_user": "${{ secrets.UT_GENERATE_DATABASE_USER }}",
      "database_password": "${{ secrets.UT_GENERATE_DATABASE_PASSWORD }}"
    },
    "variables_example": {
      "jira_project_key": "${{ vars.UT_QUALITY_JIRA_PROJECT_KEY || 'BB' }}",
      "confluence_space_key": "${{ vars.UT_QUALITY_CONFLUENCE_SPACE_KEY || 'BB' }}",
      "confluence_upload_space_key": "${{ vars.UT_QUALITY_CONFLUENCE_UPLOAD_SPACE_KEY || '' }}",
      "minimum_score": "${{ vars.UT_QUALITY_MINIMUM_SCORE || '1.0' }}",
      "upload_to_confluence": "${{ vars.UT_QUALITY_UPLOAD_TO_CONFLUENCE || 'true' }}",
      "claude_code_use_bedrock": "${{ vars.UT_QUALITY_CLAUDE_CODE_USE_BEDROCK || '1' }}",
      "use_postgres_vector_db": "${{ vars.UT_QUALITY_USE_POSTGRES_VECTOR_DB || 'false' }}"
    }
  },
  "setup_instructions": {
    "important_note": "⚠️ Each secret needs TWO entries with different prefixes: UT_QUALITY_* for quality check workflow and UT_GENERATE_* for test generation workflow. For example, OPENAI_API_KEY needs both UT_QUALITY_OPENAI_API_KEY and UT_GENERATE_OPENAI_API_KEY.",
    "secrets": [
      "1. Go to your repository on GitHub",
      "2. Navigate to Settings → Secrets and variables → Actions",
      "3. Click on 'Secrets' tab",
      "4. Click 'New repository secret'",
      "5. Add each secret from the 'required' list above with BOTH prefixes:",
      "   - UT_QUALITY_* (for quality check workflow)",
      "   - UT_GENERATE_* (for test generation workflow)",
      "6. Example: For JIRA_URL, create:",
      "   - UT_QUALITY_JIRA_URL",
      "   - UT_GENERATE_JIRA_URL",
      "7. Click 'Add secret' to save each one"
    ],
    "variables": [
      "1. Go to your repository on GitHub",
      "2. Navigate to Settings → Secrets and variables → Actions",
      "3. Click on 'Variables' tab",
      "4. Click 'New repository variable'",
      "5. Add variables from the 'optional' list above (if you want to override defaults)",
      "6. Click 'Add variable' to save"
    ]
  },
  "security_best_practices": [
    "Never commit secrets or API tokens to the repository",
    "Rotate API tokens regularly (every 90 days recommended)",
    "Use dedicated service accounts for CI/CD workflows",
    "Limit API token permissions to minimum required scope",
    "Use organization-level secrets for shared credentials across repos",
    "Enable secret scanning on your repository",
    "Review and audit secret access logs periodically"
  ]
}
